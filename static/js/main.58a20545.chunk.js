(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t){},112:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),i=n(31),u=n.n(i),o=(n(68),n(20)),s=n(12),c=n(22),l=n(21),h=n(23),p=(n(69),n(41)),f=n(42),g=n(39),d=n.n(g),v=function(e){var t=[],n=e.match(/\d*\.\d*/g),r=0,a=0;return n.forEach(function(e){a%2===0?r=parseFloat(e):t.push([r,parseFloat(e)]),a=(a+1)%2}),t},b=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this))).lat=51.21205,n.lng=4.39717,n.zoom=18,n.state={linestrings:e.linestrings},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({linestrings:e.linestrings})}},{key:"getAntPaths",value:function(){var e=[],t=this.state.linestrings;if(t){var n=0;t.departureLanes.forEach(function(t){var r=v(t);e.push(a.a.createElement(d.a,{positions:r,options:{color:"green",reverse:"true"},key:t+n})),n++}),t.arrivalLanes.forEach(function(t){var r=v(t);e.push(a.a.createElement(d.a,{positions:r,options:{color:"blue"},key:t+n})),n++})}return e}},{key:"render",value:function(){var e=[this.lat,this.lng],t=this.getAntPaths();return a.a.createElement(p.a,{style:{width:"600px",height:"600px"},center:e,zoom:this.zoom},a.a.createElement(f.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t)}}]),t}(a.a.Component),w=n(10),j=n.n(w),m=n(27),L=n(62),E=n.n(L),y=n(33),k=n.n(y),O=k.a.DataFactory.namedNode;function S(e){return new Promise(function(t,n){E.a.get(e).then(function(e){return t(e.data)}).catch(function(e){return n(e)})})}function Q(e){return new Promise(function(t){var n=new k.a.Parser,r=k.a.Store();n.parse(e,function(e,n,a){n?r.addQuad(n):t(r)})})}function x(){return(x=Object(m.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,t.getQuads(null,O("http://www.w3.org/2000/01/rdf-schema#type"),O("https://w3id.org/opentrafficlights#Signalgroup")).forEach(function(e){n.push(e.subject.value)});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function D(e){return P.apply(this,arguments)}function P(){return(P=Object(m.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,t.getQuads(null,"http://www.opengis.net/#geosparql/wktLiteral",null).forEach(function(e){n[e.subject.value]=e.object.value});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function F(e){return G.apply(this,arguments)}function G(){return(G=Object(m.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,t.getQuads(null,"https://w3id.org/opentrafficlights#signalState",null).forEach(function(e){n[e.object.value]=e.subject.value});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function z(e){return W.apply(this,arguments)}function W(){return(W=Object(m.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,t.getQuads(null,"https://w3id.org/opentrafficlights#signalPhase","https://w3id.org/opentrafficlights/thesauri/signalphase/6").forEach(function(e){n.push(e.subject.value)});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var A="https://lodi.ilabt.imec.be/observer/rawdata/latest",C=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).call(this))).doc=null,e.store=null,e.signalgroups=null,e.laneDefs=null,e.departureLanes=null,e.stateDefs=null,e.lanesForSignalgroups=null,e.state={greenLightLineStrings:null},e.init(),e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){var e=this;S(A).then(function(t){e.doc=t,Q(t).then(function(t){e.store=t,function(e){return x.apply(this,arguments)}(t).then(function(t){return e.signalgroups=t}),e.departureLanes=function(e){var t=[];if(e){var n=[];e.getQuads(null,O("https://w3id.org/opentrafficlights#departureLane"),null).forEach(function(r){e.getQuads(r.object,O("http://purl.org/dc/terms/description"),null).forEach(function(r){n.includes(r.object.value)||n.push(r.object.value),e.getQuads(null,O("https://w3id.org/opentrafficlights#departureLane"),r.subject).forEach(function(n){var a=e.getQuads(n.subject,O("https://w3id.org/opentrafficlights#signalGroup"),null)[0].object.value;e.getQuads(n.subject,O("https://w3id.org/opentrafficlights#arrivalLane"),null).forEach(function(n){e.getQuads(n.object,O("http://purl.org/dc/terms/description"),null).forEach(function(e){t[r.subject.value]||(t[r.subject.value]=[]),t[r.subject.value][n.object.value]={"@id":n.object.value,"http://purl.org/dc/terms/description":e.object.value,"https://w3id.org/opentrafficlights#signalGroup":a}})})})})})}return t}(t);var n,r={},a=[];Promise.all([D(t).then(function(t){return e.laneDefs=t}),(n=t,new Promise(function(e){var t={};n&&n.getQuads(null,O("http://www.w3.org/2000/01/rdf-schema#type"),O("https://w3id.org/opentrafficlights#Signalgroup")).forEach(function(e){t[e.subject.value]||(t[e.subject.value]={departureLanes:[],arrivalLanes:[]}),n.getQuads(null,O("https://w3id.org/opentrafficlights#signalGroup"),e.subject).forEach(function(e){n.getQuads(e.subject,O("https://w3id.org/opentrafficlights#departureLane"),null).forEach(function(n){t[e.object.value].departureLanes.includes(n.object.value)||t[e.object.value].departureLanes.push(n.object.value)}),n.getQuads(e.subject,O("https://w3id.org/opentrafficlights#arrivalLane"),null).forEach(function(n){t[e.object.value].arrivalLanes.includes(n.object.value)||t[e.object.value].arrivalLanes.push(n.object.value)})})}),e(t)})).then(function(t){e.lanesForSignalgroups=t}),F(t).then(function(e){return r=e}),z(t).then(function(e){return a=e})]).then(function(){e.setState({greenLightLineStrings:e.getGreenLightLineStrings(a,r)})})})})}},{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval(function(){return e.tick()},2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"tick",value:function(){var e=this;S(A).then(function(t){Q(t).then(function(t){F(t).then(function(n){z(t).then(function(t){return e.setState({greenLightLineStrings:e.getGreenLightLineStrings(t,n)})})})})})}},{key:"getGreenLightLineStrings",value:function(e,t){var n=this,r={departureLanes:[],arrivalLanes:[]};return e&&e.forEach(function(e){var a=t[e];if(n.lanesForSignalgroups[a]){var i=n.lanesForSignalgroups[a].departureLanes,u=n.lanesForSignalgroups[a].arrivalLanes;i.forEach(function(e){n.laneDefs[e]&&!r.departureLanes.includes(n.laneDefs[e])&&r.departureLanes.push(n.laneDefs[e])}),u.forEach(function(e){n.laneDefs[e]&&!r.arrivalLanes.includes(n.laneDefs[e])&&r.arrivalLanes.push(n.laneDefs[e])})}}),r}},{key:"render",value:function(){var e=this.state.greenLightLineStrings;return a.a.createElement("div",null,a.a.createElement(b,{linestrings:e}))}}]),t}(a.a.Component),I=(n(111),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(C,null),a.a.createElement("div",null,a.a.createElement("p",null,"Departure lanes are drawn in green. Arrival lanes are drawn in blue."),a.a.createElement("p",null," There is no distinction made between which arrival lanes can be reached from which departure lanes.")))}}]),t}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},63:function(e,t,n){e.exports=n(112)},68:function(e,t,n){},69:function(e,t,n){},99:function(e,t){}},[[63,1,2]]]);
//# sourceMappingURL=main.58a20545.chunk.js.map